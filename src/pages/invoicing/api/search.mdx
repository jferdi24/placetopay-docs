export const description = 'search-invoices.';

export const apiRefs = ['/search'];

# Buscar facturas

Este endpoint permite consultar la información completa de las facturas utilizando el **documento del deudor**, la **referencia** o la **referencia alterna**.
La respuesta devuelve no solo la factura solicitada, sino también todas las facturas asociadas al documento vinculado.

---

## Inscripción de búsqueda de factura {{ id: 'search-invoices', tag: 'POST', label: 'https://api-test.placetopay.com/rest/cash/invoice/search' }}

<Row>
  <Col>
    <ApiReader
      path="/search"
      method="POST"
      api={props.refs}
    />
  </Col>
  <Col sticky>
    <br />
    <CodeGroup title="Búsqueda de factura" tag="POST" label="/rest/cash/invoice/search">
       ```bash {{ title: 'Búsqueda de factura' }}
       curl -X "POST" https://api-test.placetopay.com/rest/cash/invoice/search \
       -H "Content-Type: application/json" \
       -d '{
        "auth": {
          "login": "d15aac486fd785cda0e471a83c2b1fdf",
          "tranKey": "dsRL5wIymrySr9TgsYtxWZEIb5/RtW1v3n3xLqQZKj4=",
          "nonce": "MTIzNDU2Nzg=",
          "seed": "2024-07-31T17:02:49-05:00"
        },
        "document": "1234567813",
        "altReference": "02019003",
        "reference": "2024ABC",
        "site": "3"
      }'
      ```
    </CodeGroup>
  </Col>
</Row>

<Row>
  <Col>
    <ApiReader
      path="/search"
      method="post"
      type="response"
      api={props.refs}
    />
  </Col>
  <Col sticky>
    <br />
    <CodeGroup title="Respuesta">
      ```json {{ title: '200' }}
      {
        "status": {
          "status": "OK",
          "reason": "00",
          "message": "La petición se ha procesado correctamente",
          "date": "2020-07-29T08:00:47-05:00"
        },
        "data": [
          {
            "id": 675978,
            "status": "EXPIRED",
            "debtor": {
              "document": "1234567813",
              "documentType": "CI",
              "name": "ANDREA",
              "surname": "VIDAL FERNANDEZ"
            },
            "payment": {
              "reference": "1234567890132",
              "description": "E955",
              "amount": {
                "taxes": [
                  {
                    "kind": "valueAddedTax",
                    "amount": 0,
                    "base": 0
                  },
                  {
                    "kind": "airportTax",
                    "amount": 0,
                    "base": 0
                  }
                ],
                "details": [
                  {
                    "kind": "subtotal",
                    "amount": 30.12
                  }
                ],
                "currency": "USD",
                "total": 30.12
              },
              "allowPartial": false,
              "subscribe": false
            },
            "altReference": "02019003",
            "createdAt": "2020-07-28",
            "expirationDate": "2021-03-25 10:14:24",
            "finalDate": "2020-07-28 23:59:59",
            "siteId": 40
          }
        ]
      }
      ```
    </CodeGroup>
  </Col>
</Row>
