import { HeroPattern } from '@/components/HeroPattern'

<HeroPattern />

# Notificaciones

**AutoPay** envía notificaciones cuando hay un cambio en el estado de los autopagos pertenecientes a tu comercio. Ver [Contrato de webhook](/autopay/contracts/webhook).

Al recibir una notificación, se recomienda llamar a la API de [consulta de AutoPagos](/autopay/autopay-api) para obtener más detalles sobre el cambio,
de manera que siempre se tenga información precisa y actualizada.

Para poder recibir notificaciones el comercio debe exponer un endpoint tipo **POST** con el contrato mencionado en esta documentación, además debe existir en la plataforma el comercio registrado.

### Autenticación

Cada notificación incluye una firma signature, que debe ser validada por el receptor para confirmar que proviene de
AutoPay, garantizando la autenticidad del mensaje y evitando que información sensible sea alterada por terceros. Esto refuerza la seguridad de todo el proceso de forma sencilla y confiable.

El signature es un valor criptográfico generado a partir de la combinación de datos específicos del mensaje y una
clave secreta. Su propósito es garantizar que la notificación no ha sido manipulada durante la transmisión y que
proviene de una fuente legítima.

La generación del signature normalmente sigue este proceso:
- Se combinan datos clave como el contenido del mensaje y la fecha de generación.
- Se aplica una función hash junto con una clave secreta compartida entre emisor y receptor.
- El resultado es una firma digital única que el receptor puede recalcular para verificar la autenticidad del mensaje.
- Para validar la firma, el receptor debe recalcularla utilizando los mismos datos y la misma clave secreta.

Si el resultado coincide con el signature recibido, se confirma que la notificación es legítima y no ha sido alterada.

### Tipos de eventos {{ id: 'event-types' }}
Actualmente, AutoPay envía notificaciones para los siguientes eventos:

| Evento           | Descripción                                                                                                                                             |
|------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|
| AUTOPAY_UPDATED  | Indica que un autopay ha sido actualizado, puede suceder cuando el usuario haya cambiado en medio de pago, el comercio haya la frecuencia de pago, etc. |
| AUTOPAY_FAILED   | Indica que un intento de pago automático ha fallado.                                                                                                    |
| AUTOPAY_DELETED | Indica que un autopay ha sido eliminado.                                                                                                                |