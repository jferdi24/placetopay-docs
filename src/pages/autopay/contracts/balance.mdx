export const apiRefs = ['/autopay/balance']

## Consultar monto a cobrar  {{ id: 'balance', tag: 'POST', label: '{{baseURL}}/autopay/balance' }}

<Note type="warning">
    **baseURL**: Es la URL base del aplicativo del cliente/comercio la cual debe ser entregada por el mismo y configurada en el momento del onboarding del comercio con AutoPay.
</Note>

<Row>
    <Col>
      Este endpoint permite conocer el monto que debe cobrarse asociado a un AutoPay.
      Devuelve dos valores:

      - **amount:** monto total a cobrar en el ciclo actual.
      - **min_amount:** monto mínimo requerido para ejecutar el cobro.

      Puede usarse para validar si existen valores pendientes antes de iniciar un proceso de pago o conciliación automática.
        <ApiReader
            path="/autopay/balance"
            method="POST"
            api={props.refs}
        />
    </Col>
    <Col sticky={true}>
                <CodeGroup title="Solicitud" tag="POST" label="{{baseURl}}/autopay/balance">
                    ```bash {{ title: 'Obtener balance' }}
                    curl -X "POST" {{baseURl}}/autopay/balance \
                    -H "Content-Type: application/json" \
                    -d '{
                        "auth": {
                            "login": "6dd490faf9cb87a9862245da41170ff2",
                            "tranKey": "81RuiCFgrjJ5VlSzTLqyC2cekqvq7vXQQwG1131+WK0=",
                            "nonce": "bmVybzNzYms4cmE=",
                            "seed": "2024-11-21T11:30:33-05:00"
                        },
                        "reference": "ACC00012345",
                        "id": "2972c13d-6315-4da3-80d7-64c24eb232ad"
                    }
                    '
                    ```
                </CodeGroup>
            </Col>
</Row>

<Row>
    <Col>
        <ApiReader
            path="/autopay/balance"
            method="POST"
            type="response"
            api={props.refs}
        />
    </Col>
    <Col sticky>
        <br />
        <CodeGroup title="Respuesta">
            ```json {{ title: '200: Respuesta exitosa' }}
            {
              "status": {
                 "status": "OK",
                 "reason": "00",
                 "message": "Respuesta exitosa",
                 "date": "2025-09-29T17:09:29-05:00"
              },
              "id": "2972c13d-6315-4da3-80d7-64c24eb232ad",
              "amount": {
               "currency": "USD",
               "total": 10
              },
              "min_amount": {
                "currency": "USD",
                "total": 5
              }
            }
            ```
            ```json {{ title: '400: No encontrado' }}
            {
              "status": {
                 "status": "FAILED",
                 "reason": "404",
                 "message": "Balance no encontrado",
                 "date": "2025-09-29T17:09:29-05:00"
              },
            }
            ```
            ```json {{ title: '401: Autenticación invalida' }}
            {
              "status": {
                 "status": "FAILED",
                 "reason": "100",
                 "message": "Authentication no proporcionado (Encabezado de la autorización mal formada).",
                 "date": "2025-09-29T17:09:29-05:00"
              },
            }
            ```
            ```json {{ title: '401: Autenticación invalida - Fecha del seed mayor de 5 minutos' }}
            {
              "status": {
                 "status": "FAILED",
                 "reason": "103",
                 "message": "Fecha del seed mayor de 5 minutos.",
                 "date": "2025-09-29T17:09:29-05:00"
              },
            }
            ```
        </CodeGroup>
    </Col>
</Row>
